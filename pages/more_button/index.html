<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>もっとみるボタン</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <h1>もっとみるボタン</h1>

        <div id="wrap">
            <div class="txt-upper">
                ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。
                ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。
                ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。
                ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。
                ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。
                ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。
                ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。ここにデフォルトで表示するテキストを入力します。
            </div>
            <div class="txt-under">
                あああああああああああああああああああああああああああああああああああああああああ
                あああああああああああああああああああああああああああああああああああああああああ
                あああああああああああああああああああああああああああああああああああああああああ
                あああああああああああああああああああああああああああああああああああああああああ
                あああああああああああああああああああああああああああああああああああああああああ
                あああああああああああああああああああああああああああああああああああああああああ
                あああああああああああああああああああああああああああああああああああああああああ
                あああああああああああああああああああああああああああああああああああああああああ
                あああああああああああああああああああああああああああああああああああああああああ
            </div>
            <button class="more hidden"></button>    
        </div>

    </body>
    <script>
        var flg = false

        $(document).ready(function(){
            checkWidth();

            $(window).resize(function(){
                checkWidth();
            });
        });

        $(function(){
            $(".more").on("click", function() {
                $(this).toggleClass("on-click");
                $(".txt-under").slideToggle(1000);
            });
        });

        function checkWidth() {
            var windowWidth = $(window).width();
            var thresholdWidth = 600;

            if(windowWidth < thresholdWidth) {
                $(".more").removeClass("hidden");

                if(flg === false) {
                    $(".txt-under").slideUp(1000);
                    flg = true
                }
            }
            
            if(windowWidth > thresholdWidth) {
                $(".more").addClass("hidden");
                $(".txt-under").slideDown(1000);
                flg = false
            }
            
        }
    </script>
</html>